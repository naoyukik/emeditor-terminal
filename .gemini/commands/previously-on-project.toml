description = "セッション開始時や作業再開時に、現在の戦況を正確に把握したい場合に実行するコマンド。"

# language=markdown
prompt = """
ユーザーから現在のプロジェクトの進捗や「あらすじ」を尋ねられた場合、以下のステップを厳格な順序で実行し、現状を再現せよ。

## ステップ1：ローカル環境の同期（Local Context）
1. `execute_terminal_command` を使用し `git branch --show-current` で現在のブランチを特定する。
2. `git status` および `git diff` を実行し、未コミットの変更内容を詳細に把握する。

## ステップ2：外部コンテキストの同期（External Context）
1. 特定されたブランチ名やコード内のキーワードから、関連するプロジェクト管理番号（Ticket ID）を特定する。
2. JiraやLinear等のプロジェクト管理ツール、または `GitHub` MCPツールを用いて、対象チケットの要件と現在のステータスを確認する。
3. `GitHub:get_pull_request` 等を用いて、現在のブランチに関連するPRが存在するか確認し、未解決のレビューコメントを走査する。

## ステップ3：システム稼働状況の確認（Operations Context）
1. ターミナルにて `conductor status` 等のプロジェクト固有のステータス確認コマンドを実行し、デプロイや環境の健全性を確認する。

## ステップ4：ドラマチック・レポートの生成
収集した情報を統合し、以下のフォーマットで報告せよ。

---
"Previously on [Project Name]..."

- **現在の舞台**: [Branch Name]
- **進行中のドラマ**: [git diff から読み取った実装の要約]
- **残された課題**: [チケット上の未完タスクと優先度]
- **チームの反応**: [PRの最新レビュー状況]
- **現在の状況**: [Conductor等の稼動ステータス]

Next Episode...（本日の提案）: [次に着手すべき具体的なアクション]
---
"""