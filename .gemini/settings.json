{
  "$schema": "https://raw.githubusercontent.com/google-gemini/gemini-cli/main/schemas/settings.schema.json",
  "tools": {
    "exclude": [
      "jetbrains__find_files_by_glob",
      "jetbrains__find_files_by_name_keyword",
      "jetbrains__search_in_files_by_regex",
      "jetbrains__search_in_files_by_text",
      "ShellTool(git add .)"
    ],
    "allowed": [
      "activate_skill(referencing-commit-convention)",
      "activate_skill(sequential-thinking)",
      "activate_skill(rust-coding-conventions)",
      "activate_skill(operating-git)",
      "LSTool",
      "GrepTool",
      "GlobTool",
      "Edit",
      "write_file",
      "ShellTool(ls)",
      "ShellTool(grep)",
      "ShellTool(glob)",
      "ShellTool(git add)",
      "ShellTool(git commit)",
      "ShellTool(git diff)",
      "ShellTool(git status)",
      "ShellTool(git rev-parse)",
      "ShellTool(git log)",
      "ShellTool(git remote get-url)",
      "ShellTool(gh issue view)",
      "ShellTool(gh pr view)",
      "ShellTool(gh version)",
      "ShellTool(git config --get remote.origin.url)",
      "ShellTool(cargo test)",
      "ShellTool(cargo clippy)",
      "ShellTool(cargo fmt)",
      "ShellTool(cargo check)",
      "ShellTool(cargo build)",
      "ShellTool(tail)",
      "ShellTool(mkdir)",
      "ShellTool(Test-Path)",
      "ShellTool(Get-Content)",
      "ShellTool(New-Item -ItemType Directory -Path conductor/)",
      "ShellTool(pwsh -ExecutionPolicy Bypass -File .\\install.ps1)",
      "ShellTool(Add-Content conductor/)",
      "ShellTool(.\\gradlew buildPlugin)",
      "ShellTool(.\\gradlew compileKotlin)",
      "ShellTool(.\\gradlew clean compileKotlin)",
      "ShellTool(.\\gradlew test)",
      "ShellTool(.\\gradlew detekt)",
      "sequential-thinking__sequentialthinking",
      "jetbrains__build_project",
      "jetbrains__get_all_open_file_paths",
      "jetbrains__get_file_problems",
      "jetbrains__get_file_text_by_path",
      "jetbrains__get_project_dependencies",
      "jetbrains__get_project_modules",
      "jetbrains__get_repositories",
      "jetbrains__get_run_configurations",
      "jetbrains__get_symbol_info",
      "jetbrains__list_directory_tree",
      "jetbrains__open_file_in_editor",
      "github__get_label",
      "github__issue_read",
      "github__list_issue_types",
      "github__list_issues",
      "github__list_pull_requests",
      "github__pull_request_read",
      "github__search_issues",
      "github__search_pull_requests",
      "github__update_pull_request",
      "github__update_pull_request_branch",
      "memory__create_entities",
      "memory__create_relations",
      "memory__add_observations",
      "memory__delete_entities",
      "memory__delete_relations",
      "memory__read_graph",
      "memory__search_nodes"
    ]
  },
  "mcpServers": {
    "jetbrains": {
      "url": "http://localhost:$JETBRAINS_PORT/sse",
      "headers": {
        "IJ_MCP_SERVER_PROJECT_PATH": "$IJ_MCP_SERVER_PROJECT_PATH"
      }
    },
    "learn-microsoft": {
      "url": "https://learn.microsoft.com/api/mcp"
    },
    "memory": {
      "command": "pnpm",
      "args": [
        "dlx",
        "@modelcontextprotocol/server-memory"
      ],
      "env": {
        "MEMORY_FILE_PATH": "$MEMORY_FILE_PATH"
      }
    }
  },
  "model": {
    "name": "$MODEL_NAME"
  },
  "modelConfigs": {
    "customAliases": {
      "strict-coder": {
        "extends": "gemini-3-pro-preview",
        "modelConfig": {
          "generateContentConfig": {
            "temperature": 0,
            "topP": 0.8,
            "topK": 40
          }
        }
      },
      "balanced-architect": {
        "extends": "gemini-3-pro-preview",
        "modelConfig": {
          "generateContentConfig": {
            "temperature": 0.6,
            "topP": 0.95,
            "topK": 64
          }
        }
      }
    }
  },
  "hooks": {
    "BeforeTool": [
      {
        "matcher": "run_shell_command",
        "hooks": [
          {
            "name": "check-ampersand",
            "type": "command",
            "command": "$PYTHON_COMMAND $GEMINI_PROJECT_DIR/.gemini/hooks/detect_double_ampersand.py",
            "description": "PowerShellでの&&利用を制限する"
          }
        ]
      },
      {
        "matcher": "write_file|replace_in_file|jetbrains__create_file",
        "hooks": [
          {
            "name": "architecture-guard",
            "type": "command",
            "command": "python3 .gemini/hooks/validate_architecture.py",
            "description": "バイブコーディング時の厳格なファイル命名規則を強制する"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": "startup",
        "hooks": [
          {
            "name": "python-memory-loader",
            "type": "command",
            "command": "$PYTHON_COMMAND $GEMINI_PROJECT_DIR/.gemini/hooks/init_memory.py",
            "description": "汎用的なメモリロード・フック"
          }
        ]
      }
    ]
  }
}