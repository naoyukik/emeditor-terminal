# 開発ワークフロー - emeditor-terminal

## AI行動指針 (Critical Protocol for AI)
1. **検証の絶対性**: 「ユーザー手動検証」タスクはいかなる理由があってもスキップ、自己完結、または推論のみで完了としてはならない。必ずユーザーに入力を求め、明示的な承認を得ること。
2. **推論の排除**: コードが論理的に正しいと判断できても、実際の動作確認（検証）が完了するまでは「未完了」として扱うこと。
3. **プロトコルの優先**: 作業の効率性やスピードよりも、定義されたプロトコル（手順）の遵守を最優先事項とすること。

## テスト要件
- **最小テストカバレッジ**: 80%
- 各機能には、対応するユニットテストを含めること。

## 言語規定
- **標準言語**: このプロジェクトにおけるすべてのドキュメント（`spec.md`, `plan.md` 等）および AI エージェントとの対話、報告は必ず日本語で行うこと。
- **コード注釈**: コード内のコメントは、複雑なロジックの説明に限定し、日本語で記述すること。

## コミット戦略
- **頻度**: 各タスク（Task）の完了ごとにコミットする。
- **コミットメッセージ**: `AGENTS.md` で定義されている Conventional Commits に従うこと。

## ドキュメントとサマリー
- **タスクサマリー**: 完了したタスクの詳細を記録するために Git Notes を使用する。
- **Notes の内容**: 変更内容、実行したテスト、および関連する技術的決定を含めること。

## トラック作成プロトコル
- **Issue連携**: 新規トラック（newTracks）を作成する際、以下の手順を実行すること。
    1. **既存Issueの確認**: 現在のブランチ名の先頭にある数値（`^[0-9]+`）またはユーザーからの入力でIssue番号を確認する。
    2. **Issue情報の取得**: Issue番号が特定できた場合、GitHubから内容を取得しコンテキストとして利用する。
    3. **Issue自動作成**: Issue番号が存在しない場合、ユーザーに確認の上、新規トラックの内容でGitHub Issueを作成する。
- **ブランチ作成**:
    - Issue番号取得後、該当するブランチが存在しない場合は `issue番号-タスクサマリー(英語, ケバブケース)` の形式でブランチを作成し、チェックアウトする。
- **Track ID**: トラックIDには、必ずIssue番号をプレフィックスとして付与すること。
- **言語設定**: トラック内に生成される `spec.md` および `plan.md` は、必ず日本語で記述すること。

## フェーズ完了プロトコル
- `plan.md` 内の各フェーズは、「Conductor - ユーザー手動検証」タスクで終了しなければならない。
- このタスクには、フェーズの成果物の最終確認と Git チェックポイントが含まれる。