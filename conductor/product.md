# Initial Concept
EmEditorにはターミナルを表示するプラグインや機能が存在していない。そのため、EmEditor内でターミナルを表示するプラグインを実装するプロジェクトです。

# Product Guide - emeditor-terminal

## Vision
EmEditor 内に統合されたターミナル機能を提供し、エディタを離れることなくコマンドライン操作を完結させる。特に AI エージェントを利用した開発において、コードの変更とその結果の確認をシームレスに行える環境を構築する。

## Target Users
- AI エージェントを CLI で稼働させ、その変更をリアルタイムで確認したいエンジニア
- EmEditor をメインの開発環境として利用しているプロフェッショナル

## Key Features
- **即時起動ターミナル**: プラグインボタンを押すだけで、即座にデフォルトシェル（pwsh.exe）が起動する。
- **統合 UI**: EmEditor のウィンドウ内にドッキングし、コードエディタとターミナルを同時に視認・操作可能。
- **AI 開発最適化**: AI によるコード修正を即座にターミナル上のコマンド（テスト実行など）で検証できるワークフロー。

## Goals
- EmEditor ユーザーに標準的なターミナル体験を提供する。
- AI エージェントとの協調開発における「コンテキストスイッチ」のコストを最小化する。

## Current Status (2026-01-24)
- **Advanced TUI Support**: Microsoft Edit 等のモダンな TUI アプリケーションの描画に対応。
  - **スクロール領域制御**: DECSTBM シーケンスの実装により、メニューバー等の固定表示をサポート。
  - **Altキー操作**: `Alt` キーによるメニュー操作（Metaキー送信）をサポート。EmEditor 本体のメニュー起動を抑制し、TUI 内の操作を優先。
  - **堅牢なパース**: バッファ境界で分断されたエスケープシーケンスの自動再結合機能を実装。
  - **描画安定性**: Tab文字の適切な処理と、TrueColor シーケンスのスキップによるレイアウト崩れの防止。
  - **カーソル制御**: `DECSC` / `DECRC` シーケンスのサポートにより、TUI アプリでの一時的な描画処理の安定性が向上。
- **Basic Terminal I/O**: `pwsh.exe` 等のシェルとの対話が可能。
  - **入力**: キーボードフックによる直接入力。
  - **出力**: カスタムバーによる GDI 描画。
