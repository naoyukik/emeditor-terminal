# Git 操作ガイドライン

このプロジェクトにおける Git の使用方法およびコミット規約について定義する。

## 1. 変更のステージング (`git add`)

意図しないファイルの混入を防ぐため、以下のルールを厳守すること。

- **明示的なファイル指定**: `git add .` や `git add -A` の使用は原則禁止とする。変更を行った、かつコミットに含めるべきファイルを個別に指定すること。
    - 例: `git add src/domain/terminal.rs src/application/service.rs`
- **差分の確認**: `git add` の前後に `git diff` または `git diff --staged` を実行し、意図した変更のみが含まれているか確認すること。

## 2. コミットの粒度

- **原子的なコミット (Atomic Commits)**: 1つのコミットは、論理的に1つの意味のある単位（機能追加、バグ修正、リファクタリングなど）にすること。
- **混合の禁止**: リファクタリングと機能追加を同じコミットに含めてはならない。

## 3. コミットメッセージ規約

[Conventional Commits](https://www.conventionalcommits.org/en/) に基づき、以下の形式で記述する。

### 3.1 形式
```
type: 日本語での簡潔な説明（50文字以内）

ref: チケット番号
```

- **1行目 (Header)**: 型 (type) と日本語の説明を記述する。
- **2行目**: 空行。
- **3行目 (Footer)**: `ref: ` に続けて関連する Issue 番号（ブランチ名の先頭数値）を記述する。

### 3.2 Type の種類
- `feat`: 新機能
- `fix`: バグ修正
- `refactor`: リファクタリング
- `docs`: ドキュメントのみの変更
- `style`: コードの意味に影響しない変更（空白、フォーマットなど）
- `test`: テストの追加・修正
- `chore`: ビルドプロセスやツールの変更、依存関係の更新

### 3.3 サンプル
```
feat: スクロールバックバッファの実装

ref: 23
```
