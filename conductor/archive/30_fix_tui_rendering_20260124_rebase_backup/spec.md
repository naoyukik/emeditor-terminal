# Specification: Fix TUI Rendering Issues (Microsoft Edit)

## Overview
Microsoft Edit などの TUI アプリケーションを実行した際に発生する、メニューバーの消失、行ズレ、および属性シーケンスの漏れ（`;128m` 等の表示）を修正する。
本トラックでは、エスケープシーケンスのパース処理を改善し、未知の属性コードを適切に処理することで、TUI アプリケーションのレイアウト崩れを解消することを目的とする。

## Functional Requirements
1. **メニューバー表示の正常化**
    - Microsoft Edit 起動時、最上部にメニューバーが正しく描画されること。
    - 全体の行が意図しないスクロールやオフセットによってズレないこと。

2. **属性シーケンスの漏れ防止**
    - 画面上に `;128m` などの制御シーケンスの残骸が表示されないこと。
    - パーサーが解釈できない属性コード（SGRパラメータ）を受信した場合、画面には出力せず、警告ログ（WARNレベル）を出力した上で無視すること。

3. **レイアウト維持**
    - ターミナルウィンドウのリサイズ操作を行っても、TUI のレイアウトが崩れないこと（再描画が適切に行われること）。

## Non-Functional Requirements
- **堅牢性**: 未知のエスケープシーケンスを受信してもパニックやクラッシュを起こさないこと。
- **可観測性**: 無視されたシーケンスがログから追跡可能であること。

## Acceptance Criteria
- [ ] Microsoft Edit を起動した際、メニューバーが表示され、行ズレが発生していないこと。
- [ ] 画面上に `;128m` 等の生のエスケープシーケンスが表示されないこと。
- [ ] 未知の属性コードを受信した際、警告ログが出力されていること。
- [ ] ウィンドウリサイズ時、TUI画面が著しく崩れないこと。
- [ ] ユーザーによる最終的な目視確認で、表示が適正であると判断されること。

## Out of Scope
- Microsoft Edit 以外の特定のマイナーな TUI アプリケーションでの完全な動作保証（今回は MS Edit を主対象とする）。
- ConPTY 自体のバグに起因する制御不能な挙動の修正。
