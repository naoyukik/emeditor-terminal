# Track Spec: 8_fix_ime_candidate_window_20260121

## 概要
ターミナルプラグイン内での日本語入力において、IMEの未確定文字列をカーソル位置にインライン表示し、かつ変換候補ウィンドウがカーソル直下に正しく追従するように修正する。

## 機能要件
1.  **インライン入力（Inline Composition）の実装**
    - `WM_IME_COMPOSITION` メッセージを適切に処理し、IMEから未確定文字列（Composition String）を取得する。
    - 取得した未確定文字列を、ターミナルの現在のカーソル位置に描画する。
2.  **IME候補ウィンドウの位置制御**
    - `SetCaretPos` を使用してシステムキャレットをターミナルのカーソル位置（ピクセル単位）に同期させる。
    - `ImmSetCompositionWindow` を使用し、IME候補ウィンドウが表示される基準位置をターミナルのカーソル直下に設定する。
3.  **入力確定時の処理**
    - 入力が確定（Result String）された際、その文字列を ConPTY の入力パイプへ送信し、インライン表示をクリアする。

## 非機能要件
- **描画パフォーマンス**: 日本語入力中の頻繁な再描画（InvalidateRect）が、ターミナルのレスポンスを損なわないこと。
- **マルチバイト対応**: サロゲートペアや全角文字が混在する場合でも、カーソル位置計算が正確であること。

## 基準（Acceptance Criteria）
- [ ] 日本語入力中、入力中の文字がターミナルのカーソル位置に表示されること。
- [ ] 変換候補ウィンドウ（候補リスト）が、常にターミナルのカーソル（または未確定文字列）の直下に表示されること。
- [ ] 文字の確定後、正しく ConPTY に送信され、ターミナルのバッファに反映されること。
- [ ] 入力キャンセル（Esc等）時、インライン表示が正しく消去されること。

## スコープ外
- 縦書き入力対応。
- IME独自のUIカスタマイズ（スキン等）。
