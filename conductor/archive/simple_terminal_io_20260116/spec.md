# Track Specification - Simple Terminal I/O

**概要**
EmEditorプラグインとして、バックグラウンドでシェルプロセス（`cmd.exe`）を常駐させ、ユーザー入力（ダイアログ経由）を送信し、その実行結果をEmEditorの「アウトプットバー」に出力する機能を実装する。これは将来的な「AIチャット機能」のための技術検証（PoC）と位置付ける。

**機能要件**
1.  **プラグインコマンド**:
    *   `Start Session`: シェルプロセスをバックグラウンドで起動する。
    *   `Send Command`: 入力ダイアログを表示し、ユーザーが入力した文字列をシェルプロセスに送信する。
    *   `Stop Session`: シェルプロセスを終了する。
2.  **プロセス管理**:
    *   Rustの `std::process` (または `windows` crate) を用い、標準入出力（stdin/stdout/stderr）をパイプで接続してプロセスを起動・維持する。
3.  **出力表示**:
    *   シェルからの出力（stdout/stderr）を検知し、即座にEmEditorの「アウトプットバー」へ追記する。
    *   ※アウトプットバーへの出力API（`EE_OUTPUT_STRING` 等）が利用可能か調査し、使用する。利用不可の場合はフォールバック（メッセージボックス等）を検討するが、A案を強く優先する。
4.  **入力インターフェース**:
    *   Windows API (`DialogBox` 等) を使用し、シンプルなテキスト入力ダイアログを実装する。

**非機能要件**
*   **非同期処理**: エディタのUIをフリーズさせないよう、プロセス監視と出力読み取りは別スレッドで行う。
*   **文字コード**: `cmd.exe` (Shift-JIS) と EmEditor/Rust (UTF-8/UTF-16) 間の適切な変換を行う。

**アウトオブスコープ**
*   ConPTY（疑似コンソール）による色・カーソル制御の完全再現。
*   アウトプットバー以外のカスタムUI（独自のドッキングウィンドウなど）の作成。
*   AIモデルとの実際の通信（今回はあくまでシェルとの通信）。
