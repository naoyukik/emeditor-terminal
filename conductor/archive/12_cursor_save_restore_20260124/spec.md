# Specification - Track 12: カーソル位置の保存/復元 (DECSC/DECRC) の実装

## Overview
多くの TUI アプリケーション（エディタ、ステータスバー表示など）は、一時的にカーソルを移動して描画し、元の位置に戻すために `DECSC` / `DECRC` を使用する。本トラックでは、これらのシーケンスをサポートし、カーソル位置の保存と復元を可能にする。

## Functional Requirements
- **DECSC (Save Cursor - ESC 7) の実装**
  - 現在のカーソル位置（行・列）を `Terminal` 構造体内に保持する。
  - すでに保存されている情報がある場合は上書きする。
- **DECRC (Restore Cursor - ESC 8) の実装**
  - 保存されたカーソル位置を復元する。
  - **クリッピング**: 復元時の画面サイズが保存時より小さい場合、現在の画面内に収まるよう行・列をクリップする。
  - **初期状態の扱い**: 保存が一度も行われていない状態で `DECRC` が呼ばれた場合は、復元操作を無視する。
- **マルチバイト文字の整合性**
  - カーソル位置の復元時、全角文字の途中にカーソルが配置されないよう適切に管理する。

## Non-Functional Requirements
- **パフォーマンス**: シーケンスのパースおよび状態更新を低遅延で行う。
- **保守性**: `src/domain/terminal.rs` における状態管理ロジックをシンプルに保つ。

## Acceptance Criteria
- `ESC 7` を送信した後、カーソルを移動させ、`ESC 8` を送信した際に元の位置にカーソルが戻ること。
- 一度も `ESC 7` を送信せずに `ESC 8` を送信しても、パニックや不正な動作が発生しないこと。
- 画面サイズを小さくした後に `ESC 8` を実行しても、カーソルが画面外（負の値や最大値超え）にならないこと。
- 既存の描画ロジックおよび TUI アプリケーションの動作に悪影響を与えないこと。

## Out of Scope
- 文字属性（SGR）、文字セット、Origin Mode、Wrap Mode 等の保存・復元。
